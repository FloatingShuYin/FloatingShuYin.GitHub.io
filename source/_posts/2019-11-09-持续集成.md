---
title: 持续集成
date: 2019-11-09 08:07:22
tags:
- travis-ci
- ci
- 持续集成
---

[travis-ci]: https://travis-ci.com/getting_started
[持续集成服务 Travis CI 教程]: http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html
[codecov]: https://codecov.io/
[nightwatch]: https://nightwatchjs.org/

## 参考

- [持续集成服务 Travis CI 教程][]
- [前端持续集成解决方案 ------ @zhihu](https://zhuanlan.zhihu.com/p/23093540)

## 资源

- [travis-ci][]
- [codecov][]
- [nightwatch][]

## [travis-ci][] 持续集成

### 示例
.travis.yml
```yaml
language: node_js
cache:
  directories:
    - ~/.npm
notifications:
  email: true
node_js:
  - 'node'
  - 'lts/*'
install: npm install
before_install:
  - npm install -g npm@5
  - npm install -g greenkeeper-lockfile@1
jobs:
  include:
    - stage: test
      script:
        - npm run build
        - npm run build:prod
        - npm run lint
        - npm run test
        - npm run report-coverage
      before_script: greenkeeper-lockfile-update
      after_script: greenkeeper-lockfile-upload
    - stage: deploy
      if: branch = master
      script:
        - npm run deploy
```


### 生命周期

- [https://docs.travis-ci.com/user/job-lifecycle](https://docs.travis-ci.com/user/job-lifecycle)


## [codecov] 代码覆盖率
安装
```bash
npm install codecov --save-dev
```

package.json
```json
{
  "scripts": {
    "report-coverage": "codecov"
  }
}
```

.travis.yml
```yaml
script:
  - npm run test
  - npm run report-coverage
```


